<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.acctmgmt.mapper.PjtMapper">


	<select id="getPjtList" resultType="Pjt">
		SELECT * FROM PJT
		WHERE
		co_CD =
		#{coCd}
		ORDER BY co_CD
	</select>

	<!-- <update id="updatePjt" parameterType="Pjt"> UPDATE PJT SET pgr_NM = 
		#{pgrNm}, WHERE co_CD = #{coCd} </update> -->


	<select id="getSelPjt" resultType="Pjt">
		SELECT * FROM PJT WHERE co_CD
		= #{coCd} AND pjt_CD = #{pjtCd}
	</select>

	<select id="getSelPjtList" resultType="Pjt">
		SELECT * FROM PJT
		WHERE
		pjt_CD = #{pjtCd}
		AND
		co_CD = #{coCd}
	</select>

	<update id="updatePjt" parameterType="Pjt">
		UPDATE PJT
		SET
		pgr_CD = #{pjt.pgrCd}, pgr_NM = #{pjt.pgrNm}, pjt_NM = #{pjt.pjtNm},
		pr_DT = #{pjt.prDt}, to_DT = #{pjt.toDt}, prog_FG = #{pjt.progFg},
		apjt_NM = #{pjt.apjtNm}, start_DT = #{pjt.startDt}, note = #{pjt.note}
		WHERE co_CD = #{coCd} AND pjt_CD = #{pjt.pjtCd}
	</update>


	<insert id="insertPjt" parameterType="Pjt">
		INSERT INTO PJT
		(co_CD, pgr_CD, pgr_NM, pjt_CD, pjt_NM, pr_DT, to_DT, prog_FG, apjt_NM,
		start_DT, note)
		VALUES
		(
		#{pjt.coCd}, #{pjt.pgrCd}, #{pjt.pgrNm}, #{pjt.pjtCd}, #{pjt.pjtNm}, #{pjt.prDt}, #{pjt.toDt}, #{pjt.progFg},
		#{pjt.apjtNm}, #{pjt.startDt}, #{pjt.note}
		)
	</insert>
	<delete id="deletePjt" parameterType="Pjt">
		DELETE FROM PJT
		WHERE
		CO_CD = #{pjt.coCd}
		AND
		pjt_CD = #{pjt.pjtCd}
	</delete>
	
	<select id="getPgrBy" parameterType="Pjt" resultType="Pjt">
	 SELECT pgr_CD, pgr_NM 
	    FROM PJT
	    WHERE CO_CD = #{coCd} 
	    AND
	            (
	            pgr_CD LIKE CONCAT('%', #{keyword}, '%')
	            OR
	            pgr_NM LIKE CONCAT('%', #{keyword}, '%')
	            
	        );
	</select>
	
	<select id="selPjtBy" parameterType="Pjt" resultType="Pjt">
	 SELECT *
	    FROM PJT
	    WHERE CO_CD = #{coCd} AND (
	            pjt_CD LIKE CONCAT('%', #{keyword}, '%')
	            OR
	            pjt_NM LIKE CONCAT('%', #{keyword}, '%')
	            
	        );
	</select>
	
<select id="getPjtBy" parameterType="Pjt" resultType="Pjt">
	 SELECT pjt_CD, pjt_NM 
	    FROM PJT
	    WHERE CO_CD = #{coCd} AND (
	            pjt_CD LIKE CONCAT('%', #{keyword}, '%')
	            OR
	            pjt_NM LIKE CONCAT('%', #{keyword}, '%')
	            
	        );
	</select>


	<select id="findPjtByCoCdAndKeyword" parameterType="Pjt" resultType="Pjt">
		SELECT PJT_CD, PJT_NM
			FROM PJT
			WHERE CO_CD = #{coCd}
			<if test="keyword != null and keyword != ''">
				AND (
				PJT_CD LIKE CONCAT('%', #{keyword}, '%')
				OR
				PJT_NM LIKE
				CONCAT('%', #{keyword}, '%')
				)
			</if>
	</select>
</mapper>